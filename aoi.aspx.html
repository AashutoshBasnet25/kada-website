
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>
	Overall Green Tropical Cyclone alert  for ZELIA-25 in Australia from 11 Feb 2025 06:00 UTC to 14 Feb 2025 06:00 UTC
</title><link href="Content/bootstrap.min.css" rel="stylesheet"><link href="Styles/gdacs_2.0.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" media="(min-width: 768px) and (max-width: 991px)" href="Styles/gdacs_device_2.0.css"><link rel="stylesheet" media="(max-width: 768px)" href="Styles/gdacs_minidevice_2.0.css">
    <script src="https://webtools.europa.eu/load.js" type="text/javascript"></script>
    <script type="application/json">
    {
        "utility":"analytics",
        "siteID":"770a3ada-ebea-420b-923a-c6490acb21ab",
        "sitePath":["www.gdacs.org"],
        "instance":"ec",
        "mode":"manual"
    }
    </script>
	<script type="application/json">
	{
		"utility" : "cck",
		"url": {
			"en": "https://commission.europa.eu/cookies-policy_en",
			"de": "https://commission.europa.eu/cookies-policy_de"
		}
	}
	</script>
    <script type="text/javascript" src="Scripts/jquery-3.6.4.min.js"></script>
    <script type="text/javascript" src="Scripts/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="Scripts/Alertlevels/DetailedTable.js"></script>
<!--    <script type="text/javascript" src="/Scripts/adaptivecard/InformCard.js"></script>
    <script type="text/javascript" src="https://unpkg.com/adaptivecards/dist/adaptivecards.js"></script>
    <script type="text/javascript" src="https://unpkg.com/adaptive-expressions@4.12.0/lib/browser.js"></script>
    <script type="text/javascript" src="https://unpkg.com/adaptivecards-templating/dist/adaptivecards-templating.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/markdown-it/dist/markdown-it.js"></script>
-->
    
    <title>GDACS Select AOI</title>
    <link rel="stylesheet" href="scripts/openlayers/3.20.1/ol.css" type="text/css">
    <link rel="stylesheet" href="scripts/openlayers/layerswitcher/ol3-layerswitcher.css">
    <link rel="stylesheet" href="Styles/gdacs_mapstyle.css">
    <link rel="stylesheet" href="Content/all.css"> 
    <script type="text/javascript" src="scripts/openlayers/3.20.1/ol.js"></script>
    <script type="text/javascript" src="scripts/openlayers/layerswitcher/ol3-layerswitcher.js"></script>



   <style type="text/css">
        .navbar-header{color: #9bc1ce; background-color:#69A7C3; }
        .navbar-footer{color: #9bc1ce; background-color:transparent;border:none; border-bottom:none;border-color:transparent; }
        .navbar-report{color: #6d9baf; border-bottom:1px solid; border-color:#6d9baf;min-height: 40px;margin-bottom:15px}
        .navbar-light .navbar-nav .nav-link:focus, .navbar-light .navbar-nav .nav-link:hover{color: #ffffff; text-decoration: underline;}
        .navbar-light .navbar-nav .nav-link{color:#c5d5d8}
        .navbar-light .navbar-nav .show > .nav-link, .navbar-light .navbar-nav .active > .nav-link, .navbar-light .navbar-nav .nav-link.show, .navbar-light .navbar-nav .nav-link.active {background-color:transparent;text-decoration:underline;color:white;}
        .navbar-light .navbar-nav .show > .nav-link, .navbar-light .navbar-nav .activereport > .nav-link, .navbar-light .navbar-nav .nav-link.show, .navbar-light .navbar-nav .nav-link.activereport {background-color:transparent;text-decoration:underline;color:#125172;margin: 0px 20px 0 15px}
        .navbar-light .navbar-nav .show > .nav-link, .navbar-light .navbar-nav .report-link> .nav-link, .navbar-light .navbar-nav .nav-link.show, .navbar-light .navbar-nav .nav-link.report-link {color: #6d9baf;margin: 0px 20px 0 15px}
        .report-link {color: #6d9baf;}
        #footer_home {background-color:#125172;}
       /*.device-toggler.navbar-toggler .navbar-toggler-icon {
             background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(75, 255, 0, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E");
        }

    .device-toggler.navbar-toggler {
      border-color: rgb(75, 255, 0);
    }

    .device-toggler.navbar-toggler:focus {
      outline-color: rgb(75, 255, 0);
    }*/
    </style>
    <link href="Styles/gdacs_2.0_bootstrap4to5.css" rel="stylesheet">
	<script type="text/javascript">
        $(function () {
            $('table.generic tr.main_tit').data("current", "main_tit");
            $('table.generic tr.main_tit').on('click', function () {
                changeColor(this);
            });
        });
        function changeColor(x) {
            var _current = $(x).data("current");
            if (_current == "main_tit") {
                $(x).data('current', 'main_tit_highlighted');
                $(".main_tit").css("background-color", "#083c53");
                $(".generic").css("color", "#000000");
            }
            else {
                $(x).data('current', 'main_tit');
                $(".main_tit").css("background-color", "#a3b8c1");
                $(".generic").css("color", "#666666");
            }
        }

    </script>
            
<!-- Piwik 
   <script type="text/javascript">
       if ($wt.cookie.consent.is.choiceMade() && $wt.cookie.consent.is.allAccepted()) {
           var _paq = _paq || [];
           /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
           _paq.push(['trackPageView']);
           _paq.push(['enableLinkTracking']);
           (function () {
               var u = "//stats.jrc.ec.europa.eu/";
               _paq.push(['setTrackerUrl', u + 'piwik.php']);
               _paq.push(['setSiteId', '319']);
               var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
               g.type = 'text/javascript'; g.async = true; g.defer = true; g.src = u + 'piwik.js'; s.parentNode.insertBefore(g, s);
           })();
       }
   </script>
 End Piwik Code -->
</head>
<body>
    <div id="wrapper_anniversary">
            
            <div id="header" class="container-fluid">
            <div id="top_menu">
                <style>
                    @media screen (min-width: 992px) {#main_alert_content .navbar-expand-lg {height:40px;}}
                </style>
                <div class="container">
                    <div class="float-end gdacs_top_menu_content"><a href="admin/login.html" target="_blank">admin</a></div>
                    <div class="float-end gdacs_top_menu_content"><a href="gdacsregister.html" target="_blank">register/login</a></div>
                    <div class="float-end gdacs_top_menu_content"><a href="About/contactus.aspx.html">contact us</a></div>
                    <div class="float-end gdacs_top_menu_content"><a href="About/termofuse.aspx.html">term of use</a></div>
                </div>
            </div>
            <div id="heading" class="container">
                <div id="rowhead" class="row">
                    <div id="gd_logo" class="col-lg-3 gdacs_logo">
						<img id="gdacs_logo_image" src="images/gdacs_logo_ecs_medium3.png">
					</div>
                    <div id="gd_statement" class="col-lg-6 gdacs_statement d-none d-lg-block"> GDACS is a cooperation framework between the United Nations, the European Commission and disaster managers worldwide to improve alerts, information exchange and coordination in the first phase after major sudden-onset disasters.</div>
                    <div id="gd_uneu" class="col-lg-3 gdacs_uneu d-none d-lg-block">
						<img src="images/un_eu.png">
					</div>
                </div>
            </div>
            
        </div>
        <div id="nopadding" class="container">
            
            <div id="topmenu">
                <nav class="navbar navbar-expand-lg navbar-light navbar-header navbar-fixed-top">

                  <button class="navbar-toggler" style="font-size:18px; color:white; font-weight:bold" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon" style="color:white;"></span>
                      MENU
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        <a class="nav-item nav-link active" href="default.aspx.html">HOME</a>
                        <a class="nav-item nav-link" href="Alerts/default.aspx.html">ALERTS</a>
                        <a class="nav-item nav-link" href="http://vosocc.unocha.org">VIRTUAL OSOCC</a>
                        <a class="nav-item nav-link" href="https://smcs.unosat.org/home" target="_blank">MAPS & SATELLITE IMAGERY</a>                      
                        <a class="nav-item nav-link" href="Knowledge/overview.aspx.html">KNOWLEDGE</a>
                        <a class="nav-item nav-link" href="About/overview.aspx.html">ABOUT</a>
                    </div>
                  </div>
                                                <a class="nav-item nav-link" href="anniversary.aspx.html" style="padding: 0 0 0 0">
                                <img src="images/gdacs_20th/gdacs_20_banner.png" alt="Gdacs 20th Anniversary">
                            </a>
                </nav>
            </div>
            
            <div class="row">
                <div class="report_title col-lg-12" style="margin-left: 15px;">
                    <span id="ctl00_masterReportTitle"><div id="alert_TC_Green_title_big"><div class="alert_title">Overall Green alert Tropical Cyclone  for ZELIA-25</div><div class="d-none d-md-block alert_subtitle"> in Australia</div></div></span>
                </div>
            </div>
            
            <div id="" class="">
                <div class="row alert_contents_menu">
                    <div class="col-lg-12">
                        <nav id="#eventMenu" class="navbar navbar-expand-lg navbar-light navbar-report">
                            <button class="navbar-toggler" style="font-size:16px; font-weight:bold" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavReport" aria-controls="navbarNavReport" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                                DETAILS
                            </button>
                            <div class="collapse navbar-collapse" id="navbarNavReport">
                                <ul class="navbar-nav">
                                    <li class="nav item report-link"><a class="nav-link " href="report.aspx-2.html?eventid=1001145&episodeid=13&eventtype=TC">Summary</a></li><li class="nav item report-link"><a class="nav-link " href="Cyclones/report.aspx.html?eventid=1001145&episodeid=13&eventtype=TC">Impact</a></li><li class="nav item report-link"><a class="nav-link " href="meteo.aspx.html?eventid=1001145&episodeid=13&eventtype=TC">Meteo</a></li><li class="nav item report-link"><a class="nav-link " href="gts.aspx.html?eventid=1001145&eventtype=TC">GTS</a></li><li class="nav item report-link"><a class="nav-link " href="media.aspx.html?eventid=1001145&episodeid=13&eventtype=TC">Media</a></li><li class="nav item report-link"><a class="nav-link " href="resources.aspx.html?eventid=1001145&episodeid=13&eventtype=TC&sourceid=JTWC">Resources</a></li>
                                </ul>
                            </div>
                        </nav>
                        


                    </div>
                </div>
                <form name="aspnetForm" method="post" action="./aoi.aspx?eventtype=TC&amp;eventid=1001145" id="aspnetForm">
<input type="hidden" name="ctl00_CPH_ToolkitScriptManager1_HiddenField" id="ctl00_CPH_ToolkitScriptManager1_HiddenField" value="">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="T1l2pSf5slPn8i9D5sHrtzpVL4LBXab6b0yjHgI+GG7un/aGFftbzsFVqjjFWNPJPQUu/iROiz++f9h2SKADTjqL17iskuTpDtpSj7lzWcZMZD9g38GCcfjtPSusa8r2Ko0jxyXEy2DCc6FXmhfvdBGT/bmukrp4jJl6sxjp9KN8G5F17vEUAUiwrRiWSv1Mkc0G2ti5LV/PdBPRbCQdwnJrFM28Uv4K8bLGLf2VqieqdP3gLJZsma5+oVq8lzHLatSqx4ibSBeYVD0b36f5amjkf6igyOcSnA5vG8lJC4Jb62B4WrcfZFOUO6cSUUlm8VV5py2fAuQmUxdDCgxdlvAh4QU2BgqFIOrR+Ujm4++4yC9zdAPFPtUyx/g3YBsn">


<script src="ScriptResource-1.axd?d=x6wALODbMJK5e0eRC_p1LbwMpka1cMNaOPwYAm1pfvPdgj8RZNNTw0IOYh7PTvm0o-zlXjoR-o6BjccQbtf0YR2rc-yCyh8xeHe6jdzZZNAU7oJ0APoUreoMXxFfvmop0&amp;t=60b7ac5d" type="text/javascript"></script>
<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="1685DD1C">
<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="jH8vr14k7VBQNQzMdbPAg0x+GHYCNY8a/nKUDmIwI84P2dOZHdxnxcGv9XeP4cI6EegbSqbwGaYCgqGNCEkvSxVuvnTR5g8LjsBgPMETz4nic2KfP8M/EYsPWcgu9tV+b7wQ2faGyiHHM0ShgrXFBB/LPiVaixyI6vNp24bvZO0=">
                    
    

    <div class="row alert_contents_first">
        <div class="col-lg-12">
			<div class="row ">
                <div class="col-lg-12">
                <h2>Automatic definition of the Areas of Interest (AoIs)</h2>
                    <div id="TitleDescription">
                        <p class="p_summary">Satellite mapping is  widely used by humanitarian organisations and disaster managers to rapidly and remotely assess the impact of disasters. 
                            Huge effort has been focused over the years to improve the timely and reliability of the satellite-based impact assessments. 
                            This new section of the GDACS disaster reports has the scope to support disaster managers to rapidly assess the impact of global 
                            disasters with an automatic procedure to detect the most affected areas to target the prompt acquisition of satellite images (Areas of Interest - AoIs).  <span id="expand_desc" style="color:#555555;font-weight:bold"><i id="icon_expand_desc" class="fas fa-angle-double-down"></i></span></p>
                    </div>
                    <div id="TitleSubDescription">
                    <p class="p_summary"> 
                        For Earthquakes the challenge is to estimate in few minutes the possible areas of major damage based on the estimated seismic intensity 
                        (eg. Shakemaps). For Tropical Cyclones, the challenge is the pre-tasking of the images, to shorten the time between acquisition of the images 
                        and analysis.</p>

                        <p class="p_summary">The "hazard data" (eg. Shakemaps for earthquakes  or  wind, precipitation and storm surge for Tropical Cyclones) are automatically combined with 
                        the Global Human Settlement Layer (GHSL) to identify the most exposed areas. 
                        The use of this series of AoIs allows to focus the acquisitions on the urbanised areas, 
                        allowing a comprehensive impact assessment at settlement level.</p>

                        <p class="p_summary">For each AoI defined by this new system, the exposed population is provided based on the population dataset of GHSL and the various hazards. 
                        The following data sources are adopted for the "hazards":</p>
                        <ul style="padding-left:40px">
                            <li class="p_summary">
                                Earthquakes: shakemap intensity produced by USGS.
                            </li>
                            <li class="p_summary">
                                Tropical Cyclones: definition of the AOIs for the various hazards (winds, rainfall and storm surge) using as input different atmospheric data 
                                (NOAA-HWRF, NOAA-GFS, ECMWF-HRES, NASA-GPM). 
                                EC-JRC is also working on two additional layers: maximum (Data type: Maximum All) and the combination of the 3 hazards (Data type: Combined All).
                            </li>
                        </ul>
                            
                    </div>
                </div>
            </div>
		    <div class="row ">
                <!--<div id="mapcommandApply" class="col-lg-3 ">
                    <div id="labelApply"><h4>Apply</h4></div>
                    <div class="input-group input-group-sm mb-3">
                        <button type="button" class="btn btn-primary button_generic" onclick ="ApplyFilter()">Apply</button>
                    </div>
				</div>-->
                
				<div id="mapcommandSource" class="col-lg-4 commandcyclone">
                    <div id="labelSource"><h4>--</h4></div>
                    <div class="input-group input-group-sm mb-4">
                        <div class="input-group-prepend">
                        <select class="custom-select" id="inputSource" aria-describedby="inputGroup-sizing-sm">
                            
                        </select>
                        </div>
                    </div>
				</div>
                <div id="mapcommandDataType" class="col-lg-4 commandcyclone">
                    <div id="labelDatatype"><h4>Data Types</h4></div>
                    <div class="input-group input-group-sm mb-4">
                        <div class="input-group-prepend">
                        <select class="custom-select" id="inputDataType" aria-describedby="inputGroup-sizing-sm">
                            
                        </select>
                        </div>
                    </div>
				</div>
                <div id="mapcommandversion" class="col-lg-4">
                    <div id="labelVersion"><h4>Version</h4></div>
                    <div class="input-group input-group-sm mb-4">
                        <div class="input-group-prepend">
                        <select class="custom-select" id="inputVersion" aria-describedby="inputGroup-sizing-sm">
                            
                        </select>
                        </div>
                    </div>
                </div>
			</div>
            <div class="row">
                <span id="ctl00_CPH_LabelMsg"></span>
			</div>
            <div class="row">
                <div id="mapcol1" class="col-lg-12">
                    <div id="map" class="main_report_map">
                    </div>
                    <div id="popup" class="ol-popup">
                        <a href="#" id="popup-closer" class="ol-popup-closer"></a>
                        <div id="popup-content"></div>
                    </div>
                    <div class="row section_report">
                        <div class="col-lg-2">
                            <div id="labelIntensity"><h4>Intensity</h4></div>
                            <div class="input-group input-group-sm mb-2">
                              <div class="input-group-prepend">
                                <select class="custom-select" id="inputIntensity" aria-describedby="inputGroup-sizing-sm">
                                    <option value="All" selected="selected">All</option>
                                </select>
                              </div>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <h4>Population</h4>
                            <div class="input-group input-group-sm mb-2">
                              <div class="input-group-prepend">
                                <select class="custom-select" id="inputLayer" aria-describedby="inputGroup-sizing-sm">
                                    <option value="All" selected="selected">All</option>
                                    <option value="Urban">Urban (GHSL)</option>
                                    <option value="City">City</option>
                                </select>
                              </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <h4>Map commands</h4>
                            <div class="input-group input-group-sm mb-3">
                              <div class="input-group-prepend">
                                <select class="custom-select" id="inputCommand" aria-describedby="inputGroup-sizing-sm">
                                    <option value="none" selected="selected">None</option>
                                    <option value="drag">Move</option>
                                    <option value="modify">Modify</option>
                                    <option value="polygon">Polygon</option>
                                    <option value="box">Box</option>
                                </select>

                              </div>
                            </div>
                        </div>
   
                        <div class="col-lg-2">
                            <h4>Export</h4>
                            <div><!--class="form-check"-->
                                <input type="submit" name="ctl00$CPH$Button1" value="KML" onclick="exportData();" id="ctl00_CPH_Button1" class="btn btn-primary button_generic">
                            </div>
                        </div>
                    </div>
                    <div id="rowLegend" class="row section_report" style="border-bottom:none">
                        <div id="imageLegend" class="col-lg-12">

                        </div>

                    </div>
                </div>
                
            </div>
            
            <div class="row">
                <div class="col-lg-12">
                    <span id="ctl00_CPH_Summary"></span>
                    <input type="hidden" name="ctl00$CPH$hiddendata" id="ctl00_CPH_hiddendata">
                    <input type="hidden" name="ctl00$CPH$hiddenscale" id="ctl00_CPH_hiddenscale">
                    
                </div>
            </div>
			<div class="row section_report">
				<div id="contentList" class="col-lg-12">
                    <div id="dinamicCoord"></div>
					<div id="tableList">
					</div>
				</div>
			</div>						

        </div>
    </div>


    <script type="text/javascript">
        var structureData = {"DataTypes":[{"KeyData":"aoi_comb_all","TextValue":"Combined All"},{"KeyData":"aoi_max_all","TextValue":"Maximum All"},{"KeyData":"aoi_comb_wr","TextValue":"Combined Wind Rain"},{"KeyData":"-------","TextValue":"-------"},{"KeyData":"aoi_wind","TextValue":"Wind"},{"KeyData":"aoi_surge","TextValue":"Storm Surge"},{"KeyData":"aoi_rain","TextValue":"Rain"},{"KeyData":"-------","TextValue":"-------"}],"Sources":[{"TextValue":"HWRF"},{"TextValue":"ECMWF"},{"TextValue":"GFS"}],"ImpactView":[{"Index":0,"Label":"Final","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121390"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_comb_all","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121391"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_comb_wr","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121392"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121393"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121394"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_max_all","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121395"},{"Source":null,"Enabled":false,"Typedata":"-------","Linkapi":""},{"Source":null,"Enabled":false,"Typedata":"-------","Linkapi":""},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121436"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_comb_all","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121437"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_comb_wr","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121438"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121439"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121440"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_max_all","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121441"},{"Source":null,"Enabled":false,"Typedata":"--","Linkapi":""}]},{"Index":12,"Label":"14 Feb 2025 00:00","Details":[{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121711"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121714"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121716"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121717"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121720"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121721"}]},{"Index":11,"Label":"13 Feb 2025 18:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121676"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121679"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121683"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121696"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121699"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121703"}]},{"Index":10,"Label":"13 Feb 2025 12:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121672"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121675"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121682"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121692"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121695"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121702"}]},{"Index":9,"Label":"13 Feb 2025 06:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121668"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121671"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121681"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121688"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121691"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121701"}]},{"Index":8,"Label":"13 Feb 2025 00:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121664"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121667"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121680"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121684"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121687"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121700"}]},{"Index":7,"Label":"12 Feb 2025 18:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121581"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121584"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121585"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121594"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121597"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121600"},{"Source":"ECMWF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121660"},{"Source":"ECMWF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121663"}]},{"Index":6,"Label":"12 Feb 2025 12:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121556"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121559"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121560"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121590"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121593"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121599"},{"Source":"ECMWF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121656"},{"Source":"ECMWF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121659"}]},{"Index":5,"Label":"12 Feb 2025 06:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121429"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121432"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121435"},{"Source":"ECMWF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121575"},{"Source":"ECMWF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121578"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121586"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121589"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121598"}]},{"Index":4,"Label":"12 Feb 2025 00:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121406"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121409"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121410"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121457"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121460"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121461"},{"Source":null,"Enabled":false,"Typedata":"--","Linkapi":""}]},{"Index":3,"Label":"11 Feb 2025 18:00","Details":[{"Source":null,"Enabled":false,"Typedata":"--","Linkapi":""},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121452"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121455"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121456"},{"Source":null,"Enabled":false,"Typedata":"--","Linkapi":""}]},{"Index":2,"Label":"11 Feb 2025 12:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121401"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121404"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121405"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121447"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121450"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121451"},{"Source":null,"Enabled":false,"Typedata":"--","Linkapi":""}]},{"Index":1,"Label":"11 Feb 2025 06:00","Details":[{"Source":"HWRF","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121396"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121399"},{"Source":"HWRF","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121400"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_wind","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121442"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_rain","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121445"},{"Source":"GFS","Enabled":true,"Typedata":"aoi_surge","Linkapi":"https://www.gdacs.org/gdacsapi/api/export/getaoi?id=121446"},{"Source":null,"Enabled":false,"Typedata":"--","Linkapi":""}]}]};
        var arraydata = {"type":"FeatureCollection","features":[]};
        var arrayUrbanLayer = '{"type":"FeatureCollection","features":[]}';
        var arrayGeometry = {type:"FeatureCollection",features:[]};
        var fileName = 'TC_1001145.kml';
        var impactTCselected = '';
        var eventtype = fileName.startsWith('EQ')
            ? 'EQ'
            : 'TC';

        var arraydataMap = arraydata;
        var showVersion=false
        var showOSM = false;
        var reportLat = -20.576759540637916;
        var reportLon = 118.85866690585129;
        var reportZoomLevel = 5;
        var reportShakeLayer = '';
        var reportJsonLayerPopulation = '';
        var reportJsonLayer = '';
        var reportWMSPopDensity = 'https://www.gdacs.org/arcgis/rest/services/GDACS/pop_dens_ghs_30/MapServer';

        var interactionType="";
        var layerType="Urban";
        var layerIntensity="All";
        var selection_Buffer;
        var style_selection;

        var draw = new ol.interaction.Draw({
            id : 'draw',
            source: selection_Buffer,
            type: 'Polygon'
        });
        var select = new ol.interaction.Select({
            id : 'select',
            style: style_selection,
            layers: function(layer) {
                    return layer.get('id')=='selection'
                }
        });
        var modify = new ol.interaction.Modify({
            id: 'modify',
            features: select.getFeatures()
        });
        
        var drawbox = new ol.interaction.Draw({
            id : 'drawbox',
            source: selection_Buffer,
            type: 'Circle',
            geometryFunction:ol.interaction.Draw.createBox()
        });

        modify.on('modifyend', function (evt) {
            
            /*var coord = evt.features.item(0).getGeometry().getCoordinates();
            var sqlPoly = "";
            $(coord[0]).each(function (index, item) {
                sqlPoly += sqlPoly == ""
                    ? item[0] + " " + item[1] 
                    : "," + item[0] + " " + item[1] ;
            });
            sqlPoly = "POLYGON(("+sqlPoly+"))";
            getPopulationInPolygon("#dinamicCoord", sqlPoly,evt.features.item(0));
            */

            


        });		


        var snap = new ol.interaction.Snap({source: selection_Buffer});
		
        draw.on('drawend', function(evt){
            addFeature(evt);
        });		
		
        drawbox.on('drawend', function(evt){
            addFeature(evt);
        });		

        function addFeature(evt) {
        var feature = evt.feature;
            var p = feature.getGeometry();
            
            var _textPromptIntensity = eventtype == 'EQ'
                ? 'Insert the intensity of area (6 to max intesity detected)'
                : 'Insert the intensity of area (1 to 5)';
            var _newname = prompt('Insert the name of area');
            var _intensity = prompt(_textPromptIntensity);
            var _id = Date.parse(new Date()) / 1000;
            
            if (_newname ==null){
                _newname = 'Undefined Name';
            }
            if (_intensity ==null){
                _intensity = $("#inputIntensity option:selected").val();//option:eq(1)
            }

            feature.setProperties({
                'id': _id,
                'key': 'custom_' + _id,
                'layersource': 'urbanareas',
                'intensity': _intensity,
                'description': 'Custom area ' + _id,
                'name': _newname,
                'namefile':fileName,
                'itemchecked': true,
                'visible':true
            });

            var featureArray = {};
            featureArray.type = 'Feature';
            featureArray.properties = {};
            featureArray.geometry = {};
            featureArray.properties["id"] = _id;
            featureArray.properties["key"] ='custom_' + _id;
            featureArray.properties["layersource"] = 'urbanareas';
            featureArray.properties["intensity"] = _intensity;
            featureArray.properties["description"] = 'Custom area ' + _id;
            featureArray.properties["name"] = _newname;
            featureArray.properties["namefile"] =fileName;
            featureArray.properties["itemchecked"] = true;
            featureArray.properties["visible"] =true;
            featureArray.geometry.type = "Polygon";
            featureArray.geometry.coordinates = feature.getGeometry().getCoordinates();

			console.log("POLY: " + JSON.stringify(featureArray.geometry));


            var featuresSource = selection_Buffer.getSource();
            featuresSource.addFeature(feature);
            DeterminatePopulation(feature);
            arraydataMap.features.push(featureArray);
            selection_Buffer.setSource(featuresSource);
            createGridTable();
        }
		
        /**
		* Define a namespace for the application.
		*/
        var app = {};

	
        /**
		* @constructor
		* @extends {ol.interaction.Pointer}
		*/
        app.Drag = function() {
            ol.interaction.Pointer.call(this, {
                handleDownEvent: app.Drag.prototype.handleDownEvent,
                handleDragEvent: app.Drag.prototype.handleDragEvent,
                handleMoveEvent: app.Drag.prototype.handleMoveEvent,
                handleUpEvent: app.Drag.prototype.handleUpEvent
            });

            /**
			 * @type {ol.Pixel}
			 * @private
			 */
            this.coordinate_ = null;

            /**
			 * @type {string|undefined}
			 * @private
			 */
            this.cursor_ = 'pointer';

            /**
			 * @type {ol.Feature}
			 * @private
			 */
            this.feature_ = null;

            /**
			 * @type {string|undefined}
			 * @private
			 */
            this.previousCursor_ = undefined;

        };
        ol.inherits(app.Drag, ol.interaction.Pointer);
        app.Drag.id= 'drag';

        /**
		* @param {ol.MapBrowserEvent} evt Map browser event.
		* @return {boolean} `true` to start the drag sequence.
		*/
        app.Drag.prototype.handleDownEvent = function(evt) {
            var map = evt.map;
            var feature = map.forEachFeatureAtPixel(evt.pixel,
				function(feature) {
				    return feature;
				});

            if (feature) {
                //Only for selection layer (AOI)
                if (feature.get('layersource') == "city" || feature.get('layersource') == "urbanareas"){
                    this.coordinate_ = evt.coordinate;
                    this.feature_ = feature;
                }
            }

            return !!feature;
        };


        /**
		* @param {ol.MapBrowserEvent} evt Map browser event.
		*/
        app.Drag.prototype.handleDragEvent = function (evt) {
            if (this.coordinate_ != null) {
                var deltaX = evt.coordinate[0] - this.coordinate_[0];
                var deltaY = evt.coordinate[1] - this.coordinate_[1];

                var geometry = /** @type {ol.geom.SimpleGeometry} */
                    (this.feature_.getGeometry());
                geometry.translate(deltaX, deltaY);
                this.coordinate_[0] = evt.coordinate[0];
                this.coordinate_[1] = evt.coordinate[1];
                $("#dinamicCoord").html("Coordinate: X=" +evt.coordinate[0] +"; Y="+evt.coordinate[1]);

            }
        };


        /**
		* @param {ol.MapBrowserEvent} evt Event.
		*/
        app.Drag.prototype.handleMoveEvent = function(evt) {
            if (this.cursor_) {
                var map = evt.map;
                var feature = map.forEachFeatureAtPixel(evt.pixel,
                    function(feature) {
                        return feature;
                    });
                var element = evt.map.getTargetElement();
                if (feature) {
                    //Only for selection layer (AOI)
                    if (feature.get('layersource') == "city" || feature.get('layersource') == "urbanareas"){
                        if (element.style.cursor != this.cursor_) {
                            this.previousCursor_ = element.style.cursor;
                            element.style.cursor = this.cursor_;
                        }
                    }
                } else if (this.previousCursor_ !== undefined) {
                    element.style.cursor = this.previousCursor_;
                    this.previousCursor_ = undefined;
                }
            }
        };


        /**
		* @return {boolean} `false` to stop the drag sequence.
		*/

        //app.Drag.prototype.handleUpEvent = function() {
        //    this.coordinate_ = null;
        //    this.feature_ = null;
        //    exportData();
        //    $("#dinamicCoord").html("MoveUp: ");
        //    return false;
        //};		

        app.Drag.prototype.handleUpEvent = function(evt) {
            var map = evt.map;
            var feature = map.forEachFeatureAtPixel(evt.pixel,
                function(feature) {
                    return feature;
                });
            if (feature) {
                //Only for selection layer (AOI)
                DeterminatePopulation(feature);
            } 
            this.coordinate_ = null;
            this.feature_ = null;
            return false;
        };
        function DeterminatePopulation(feature) {
            if (feature.get('layersource') == "city" || feature.get('layersource') == "urbanareas") {
                var coord = feature.getGeometry().getCoordinates();
                var sqlPoly = "";
                $(coord[0]).each(function (index, item) {
                    sqlPoly += sqlPoly == ""
                        ? item[0] + " " + item[1]
                        : "," + item[0] + " " + item[1];
                });
                sqlPoly = "POLYGON((" + sqlPoly + "))";
                getPopulationInPolygon("#dinamicCoord", sqlPoly, feature);
            }
        }
		
        var drag = new app.Drag();

        function getPopulationInPolygon(paramIdElement,paramPolygon,feature) {
            var result = "";
            var urlPopulation = "https://www.gdacs.org/IDAS/json?paramModel=AOI&paramPolygon=" + paramPolygon;
            $(paramIdElement).html("Detecting population: <img src='images/loader.gif'/>");
            $.ajax({ type: "GET", dataType: "json",url: urlPopulation }).done(function (data) {

                var itemPop = data.datavalues.filter(x => x.alias == "Population");
                if (itemPop != null) {
                    result = itemPop[0].values[0].fields[0].value;
                }
                $(paramIdElement).html("Population in area: " + result);
                for (var i = 0; i < arraydataMap.features.length; i++){
                    try
                    {
                        if (arraydataMap.features[i].properties["key"] == feature.get('key')) {
                            arraydataMap.features[i].properties["population"] = result;
                        }
                    }
                    catch (ex) {
                        console.log("Index:" + i + " Err:" + ex);
                    }
                }
                exportData();
                refreshElements()
            });
            
        }
        //Change geomtery by scale
        function changeGeometry(paramScale){
            var layer;
            map.getLayers().forEach(function (lyr) {
                lyr.getLayers().forEach(function (lyr2){
                    if ('selection' == lyr2.get('id')) {
                        layer = lyr2;
                    }            
				
                });
            });
            var sourceToUpdate = layer.getSource();
            var featureToUpdate = sourceToUpdate.getFeatures();
            for (var j = 0; j < arraydataMap.features.length; j++){
                if (arraydataMap.features[j].properties.layersource == "city") {
                    var polygon = new ol.geom.Polygon();
                    polygon.setCoordinates(arraydataMap.features[j].geometry.coordinates);
                    var _geomExtent = polygon.getExtent();
                    var _centroid = ol.extent.getCenter(_geomExtent);
                    var _y=  _centroid[1];
                    var _x = _centroid[0];
                
                    for(var i=0; i< featureToUpdate.length; i++) {

                        if (featureToUpdate[i].get('id')==arraydataMap.features[j].properties.id) {
                            polygon = new ol.geom.Polygon();
                            _geomExtent = featureToUpdate[i].getGeometry().getExtent();
                            _centroid = ol.extent.getCenter(_geomExtent);
                            _y=  _centroid[1];
                            _x = _centroid[0];
                        }
                
                    }
                    arraydataMap.features[j].geometry.coordinates=(calculateBoundibox(paramScale, _x, _y));
                }
            }
            let _arrayMap = $.extend(true, {}, arraydataMap);
            _arrayMap.features = _arrayMap.features.filter(function (item) { return item.properties.itemchecked == true && item.properties.visible == true; });
            selection_Buffer.setSource(setSelectionSource(_arrayMap));
            exportData();
        }

        //Change geomtery by Radius
        
       
        //Show hide point
        function changeVisibility(parmId) {
            if (parmId != "") {
                for (var i = 0; i < arraydataMap.features.length; i++) {
                    if (arraydataMap.features[i].properties.key == parmId) {
                        arraydataMap.features[i].properties.itemchecked = !arraydataMap.features[i].properties.itemchecked;
                    }
                }
            }
            let _arrayMap = $.extend(true, {}, arraydataMap);
            _arrayMap.features = _arrayMap.features.filter(function (item) { return item.properties.itemchecked == true && item.properties.visible == true; });
            selection_Buffer.setSource(setSelectionSource(_arrayMap));
        }
		
        function assignPopulation(paramScale) {
            if (arraydataMap.features.length > 0) {
                $.each(arraydataMap.features, function (key, val) {
                    if (val.properties["layersource"]=="city") {
                        if (paramScale == "1000") {
						    val.properties["population"] = val.properties["bbox1K"];
                        }
                        else if (paramScale == "2000") {
						    val.properties["population"] = val.properties["bbox2K"];
                        }
                        else if (paramScale == "5000") {
						    val.properties["population"] = val.properties["bbox5K"];
                        }
                        else if (paramScale == "10000") {
						    val.properties["population"] = val.properties["bbox10K"];
                        }
                    }
				});
            }

        }

        function popToText(paramPop) {
            if (paramPop != null ) {
                if (paramPop > 1000000) {
                    return (Math.round(paramPop / 100000) / 10) + " million";
                } else if (paramPop > 10000) {
                    return (Math.round(paramPop / 10000) * 10) + " thousand";
                }
                else if (paramPop > 1000) {
                    return Math.round(paramPop  / 1000) + " thousand";
                }
                else if (paramPop >= 100){
                    return paramPop;
                }
                else if (paramPop >= 0) {
                    return "less than 100";
                }
                else
                    return "0";

            }
            else
                return "n.a";

        }

        function createGridTable() {
            var items = [];
            var empty = true;
            var _arrayTable = arraydataMap.features.filter(x => (x.properties["layersource"] == "urbanareas" && x.properties.visible==true));
            if (layerType=="All" || layerType=="Urban") {
                items.push("<br/>");
                items.push("<table class=\"generic_detail\">");
                items.push("<tr class=\"main_tit_detail\">");
                items.push("<td class=\"cell_detail_center\"><input id=\"cbAll\" type=\"checkbox\" aria-label=\"\" checked></td>");
                items.push("<td class=\"cell_detail_center\">Intensity</td>");
                items.push("<td class=\"cell_detail_center\">Urban Area</td>");
                items.push("<td class=\"cell_detail_center\">Population estimated</td>");
                items.push("<td class=\"cell_detail_center\">Coordinates (Lon/Lat)</td>");
                items.push("</tr>");
                if (_arrayTable.length > 0) {
                    //var arraySorted = arraydataMap.features.sort(function(a, b) {return parseInt(b.population) - parseInt(a.population)});
                    //arraySorted = arraySorted.sort(function(a, b) {return b.intensity - a.intensity});
                    $.each(_arrayTable.sort(
                        function (a, b) {
                            if (b.properties.intensity >= a.properties.intensity) return 1;
                            if (a.properties.intensity > b.properties.intensity) return -1;
                        }
                    ).sort(
                        function (a, b) {
                            if (parseInt(b.properties.population) >= parseInt(a.properties.population)) return 1;
                            if (parseInt(a.properties.population) > parseInt(b.properties.population)) return -1;
                        }
                    ), function (key, val) {
                        items.push("<tr>");

                        if (val.properties["itemchecked"] == true) {
                            items.push("<td class=\"cell_detail_center\"><input id=\"cb_" + val.properties["id"] + "\" type=\"checkbox\" class=\"cbrow\" data-index='" + val.properties["key"] + "' checked=" + val.properties["itemchecked"] + "  aria-label=\"\"></td>");
                        }
                        else {
                            items.push("<td class=\"cell_detail_center\"><input id=\"cb_" + val.properties["id"] + "\" type=\"checkbox\" class=\"cbrow\" data-index='" + val.properties["key"] + "' aria-label=\"\"></td>");
                            }

                        if (eventtype == "EQ") {
                            items.push("<td class=\"cell_detail_center\"><img src=\"images/intensity_icon/" + val.properties["intensity"] + "p.png\" width=\"25px\"/></td>");
                        }
                        else {
                            
                            var _prefixImg = impactTCselected.toLowerCase().indexOf("rain")!=-1
                                ? "rain"
                                : impactTCselected.toLowerCase().indexOf("surge")!=-1
                                    ? "surge"
                                    : impactTCselected.toLowerCase().indexOf("wind")!=-1
                                        ? "wind"
                                        : impactTCselected.toLowerCase().indexOf("combinedwr")!=-1
                                            ? "combwr"
                                            : impactTCselected.toLowerCase().indexOf("maximumall")!=-1
                                                ? "maxall"
                                                : "comball";
                            items.push("<td class=\"cell_detail_center\"><img src=\"images/intensity_icon/"+_prefixImg  + val.properties["intensity"] + ".png\" width=\"25px\"/></td>");
                        }

                        items.push("<td class=\"cell_detail_center\">" + val.properties["name"] + "</td>");
                        items.push("<td class=\"cell_detail_center\">" + popToText(val.properties["population"]) + "</td>");
                        items.push("<td class=\"cell_detail_center\">" + val.properties["longitude"] + "/" + val.properties["latitude"] + "</td>");
                        items.push("</tr>");

                    });
                }
                else {
                    items.push("<tr>");
                    items.push("<td colspan=\"5\">No Urban AOI found</td>");
                    items.push("</tr>");
                    
                }
                items.push("</table>");	
            }
            if (layerType == "All" || layerType == "City") {
                _arrayTable = arraydataMap.features.filter(x => x.properties["layersource"] == "city" && x.properties.visible==true);
                items.push("<br/>");
                items.push("<table class=\"generic_detail\">");
                items.push("<tr class=\"main_tit_detail\">");
                items.push("<td class=\"cell_detail_center\"><input id=\"cbAll\" type=\"checkbox\" aria-label=\"\" checked></td>");
                items.push("<td class=\"cell_detail_center\">Intensity</td>");
                items.push("<td class=\"cell_detail_center\">City</td>");
                items.push("<td class=\"cell_detail_center\">Class</td>");
                items.push("<td class=\"cell_detail_center\">Population estimated</td>");
                items.push("<td class=\"cell_detail_center\">Coordinates (Lon/Lat)</td>");
                items.push("</tr>");
                if (_arrayTable.length > 0) {
                    //var arraySorted = arraydataMap.features.sort(function(a, b) {return parseInt(b.population) - parseInt(a.population)});
                    //arraySorted = arraySorted.sort(function(a, b) {return b.intensity - a.intensity});
                    $.each(_arrayTable.sort(
			                function (a,b){
				                if (b.properties.intensity>=a.properties.intensity) return 1;
				                if (a.properties.intensity>b.properties.intensity) return -1;
			                }				
		                ).sort(
			                function (a,b){
				                if (parseInt(b.properties.population)>=parseInt(a.properties.population)) return 1;
				                if (parseInt(a.properties.population)>parseInt(b.properties.population)) return -1;
			                }				
		                ), function (key, val) {
			                items.push("<tr>");
					
			                if (val.properties["itemchecked"]==true) {
				                items.push("<td class=\"cell_detail_center\"><input id=\"cb_"+val.properties["id"]+"\" type=\"checkbox\" class=\"cbrow\" data-index='"+val.properties["key"]+"' checked="+val.properties["itemchecked"]+"  aria-label=\"\"></td>");
			                }
			                else {
				                items.push("<td class=\"cell_detail_center\"><input id=\"cb_"+val.properties["id"]+"\" type=\"checkbox\" class=\"cbrow\" data-index='"+val.properties["key"]+"' aria-label=\"\"></td>");
                            }
                            if (eventtype == "EQ") {
                                items.push("<td class=\"cell_detail_center\"><img src=\"images/intensity_icon/" + val.properties["intensity"] + "p.png\" width=\"25px\"/></td>");
                            }
                            else {
                                var _prefixImg = impactTCselected.toLowerCase().indexOf("rain")!=-1
                                                ? "rain"
                                                : impactTCselected.toLowerCase().indexOf("surge")!=-1
                                                    ? "surge"
                                                    : impactTCselected.toLowerCase().indexOf("wind")!=-1
                                                        ? "wind"
                                                        :  impactTCselected.toLowerCase().indexOf("combinedwr")!=-1
                                                            ? "combwr"
                                                            : impactTCselected.toLowerCase().indexOf("maximumallwr")!=-1
                                                                ? "maxall"
                                                                : "comball";
                                items.push("<td class=\"cell_detail_center\"><img src=\"images/intensity_icon/"+_prefixImg  + val.properties["intensity"] + ".png\" width=\"25px\"/></td>");
                            }
			                items.push("<td class=\"cell_detail_center\">" + val.properties["name"] + "</td>");
                            items.push("<td class=\"cell_detail_center\">" + val.properties["cityclass"] + "</td>");
			                items.push("<td class=\"cell_detail_center\">" + popToText(val.properties["population"]) + "</td>");
			                items.push("<td class=\"cell_detail_center\">" + val.properties["longitude"] + "/" + val.properties["latitude"] + "</td>");
			                items.push("</tr>");

		                });
                }
                else {
                    items.push("<tr>");
                    items.push("<td colspan=\"6\">No AOI found</td>");
                    items.push("</tr>");
                }

                items.push("</table>");		
            }

            	
            $('#tableList').html(items.join(""));
			
        }
		
        //Export Data to hidden field and update arraydataMap
        function exportData(){
            var layer;
            map.getLayers().forEach(function (lyr) {
                lyr.getLayers().forEach(function (lyr2){
                    if ('selection' == lyr2.get('id')) {
                        layer = lyr2;
                    }            
				
                });
            });
			
            var allFeatures = layer.getSource().getFeatures();
            var format = new ol.format.GeoJSON();
            for (var i = 0; i < arraydataMap.features.length; i++){
                try
                {
                    for (var j=0;j<allFeatures.length;j++){
                        if (arraydataMap.features[i].properties["key"]==allFeatures[j].get('key')){
                            arraydataMap.features[i].properties["itemchecked"] = allFeatures[j].get('itemchecked');
                            arraydataMap.features[i].geometry.coordinates = allFeatures[j].getGeometry().getCoordinates();
                            allFeatures[j].setProperties({ 'DataType':  $("#inputSource").find(":selected").text() });
                            allFeatures[j].setProperties({ 'DataSource': $("#inputDataType").find(":selected").text() });
                            
                        }
                    }                
                }
                catch (ex) {
                    console.log("Index:" + i + " Err:" + ex);
                }
                
            }
            $('#ctl00_CPH_hiddendata').val(format.writeFeatures(allFeatures));
        }
		
        function manageInteraction()
        {
            map.removeInteraction(select);
            map.removeInteraction(modify);
            map.removeInteraction(drag);
            map.removeInteraction(draw);
            map.removeInteraction(drawbox);
			
            switch (interactionType)
            {
                case "drag":
                    map.addInteraction(drag);		
                    break;
                case "modify":
                    map.addInteraction(select);		
                    map.addInteraction(modify);		
                    break;
                case "polygon":
                    map.addInteraction(draw);		
                    break;
                case "box":
                    map.addInteraction(drawbox);		
                    break;
                default :
                    break;
            }
        }		
        function showData(paramLayerToShow,paramIntensityToShow) {
            for (var i = 0; i < arraydataMap.features.length; i++){
                if (arraydataMap.features[i].properties["layersource"] == "urbanareas") {
                    if (paramLayerToShow == "All" || paramLayerToShow == "Urban") {
                        if (paramIntensityToShow == "All" || arraydataMap.features[i].properties["intensity"] == paramIntensityToShow) {
                            arraydataMap.features[i].properties["visible"] = true;
                        }
                        else {
                            arraydataMap.features[i].properties["visible"] = false;
                        }
                    }
                    else {
                        arraydataMap.features[i].properties["visible"] = false;
                    }
                } else if (arraydataMap.features[i].properties["layersource"] == "city") {
                    if (paramLayerToShow == "All" || paramLayerToShow == "City") {
                        if (paramIntensityToShow == "All" || arraydataMap.features[i].properties["intensity"] == paramIntensityToShow) {
                            arraydataMap.features[i].properties["visible"] = true;
                        }
                        else {
                            arraydataMap.features[i].properties["visible"] = false;
                        }                    }
                    else {
                        arraydataMap.features[i].properties["visible"] = false;
                    }
                } 
                
            }
        }
        function populateCommandSelector() {
            populateListVersion();
            populateListSources();
            populateListDataType();

        }

        function populateListSources() {
            if (structureData.Sources.length > 0) {
                $.each(structureData.Sources, function (key, val) {
                    if(val["TextValue"]=="HOLLAND")
                        $("#inputSource").append($("<option />").val(val["TextValue"]).text("GDACS+"));
                    else
                        $("#inputSource").append($("<option />").val(val["TextValue"]).text(val["TextValue"]));

                });
                $("#inputSource").on('change', function() {
                    manageEnabledDataType($(this).val());
                    ApplyFilter();

                });
               
            }
        }

        function populateListDataType() {
            if (structureData.DataTypes.length > 0) {
                $.each(structureData.DataTypes, function (key, val) {
                    $("#inputDataType").append($("<option />").val(val["KeyData"]).text(val["TextValue"]));
                });
                $("#inputDataType").on('change', function() {
                   
                    ApplyFilter();

                });
            }
        }
        function populateListVersion() {
            if (structureData.ImpactView.length > 0) {
                $.each(structureData.ImpactView, function (key, val) {
                    $("#inputVersion").append($("<option />").val(val["Index"]).text(val["Label"]));
                });
                $("#inputVersion").on('change', function() {
                    manageEnabledSources($(this).val());
                    manageEnabledDataType( $("#inputSource").find(":selected").val())
                });
            }
             
        }
        function manageEnabledSources(indexVersion) {
            $("#inputSource option").each(function (index, element) {
                $(this).css("font-style","italic").css("font-size","small").prop("disabled", true);
                if (structureData.ImpactView.find(x => x.Index == indexVersion).Details.find(x => x.Source == $(this).val()) != null)
                    $(this).css("font-style","normal").css("font-size","normal").prop("disabled", false);
            });
            if ($("#inputSource").find(":selected").prop("disabled")) {
                if ($("#inputSource").children("option:enabled") != null) {
                    $("#inputSource").children("option:enabled").eq(0).prop("selected", true);
                }
            }
        }
        function manageEnabledDataType( sourceSelected) {
            $("#inputDataType option").each(function (index, element) {
                $(this).css("font-style","italic").css("font-size","small").prop("disabled", true);
                if (structureData.ImpactView.find(x => x.Index == $("#inputVersion").find(":selected").val()).Details.find(x => x.Typedata == $(this).val()&& x.Source == sourceSelected) != null)
                    $(this).css("font-style","normal").css("font-size","normal").prop("disabled", false);
            });
            if ($("#inputDataType").find(":selected").prop("disabled")) {
                if ($("#inputDataType").children("option:enabled") != null) {
                    $("#inputDataType").children("option:enabled").eq(0).prop("selected", true);
                }
            }
        }
        function ApplyFilter() {
            var  _versionSelected = ($("#inputVersion").find(":selected").val());
            var  _sourceSelected =($("#inputSource").find(":selected").val());
            var  _datatypeSelected =($("#inputDataType").find(":selected").val());
            impactTCselected = DecodeDataTypeSelection(_datatypeSelected);
            var objDetails = structureData.ImpactView.find(x => x.Index == _versionSelected);
            if (objDetails != null) {
                var objLink = objDetails.Details.find(x => x.Typedata == _datatypeSelected && x.Source == _sourceSelected);
                if (objLink != null) {
                    if (objLink.Linkapi != "") {
                        LoadData(objLink.Linkapi);
                        
                    }
                    else
                        alert("No AOI generated for specified parameters");
                }
                else
                    alert("No AOI structure found ");
            }
                      
        }
        function DecodeDataTypeSelection(codeimpacttype) {
            var result = codeimpacttype == "aoi_rain"
                ? "Rain"
                : codeimpacttype == "aoi_rain_past"
                    ? "RainPast"
                    : codeimpacttype == "aoi_surge"
                        ? "StormSurge"
                        : codeimpacttype == "aoi_comb_all"
                            ? "CombinedAll"
                            : codeimpacttype == "aoi_comb_wr"
                                ? "CombinedWR"
                                : codeimpacttype == "aoi_max_all"
                                    ? "MaximumAll"
                                    : codeimpacttype == "aoi_wind"
                                        ? "Wind"
                                        : "NA";
            return result;
        }
        function DecodeWindIntensity(numWindIntensity) {
            var result = numWindIntensity == 4
                ? "MH"
                : numWindIntensity == 3
                    ? "H"
                    : numWindIntensity == 2
                        ? "STS"
                        : "TS";
            return result;
        }
        function LoadData(urlApi) {
                   
            arraydata = {type:"FeatureCollection",features:[]};
            arrayUrbanLayer = {type:"FeatureCollection",features:[]};
            arrayGeometry = { type: "FeatureCollection", features: [] };

            $.ajax({ type: "GET", dataType: "json",url: urlApi }).done(function (data) {

                var itemsData = data.features.filter(x => x.properties.layersource == "city");
                if (itemsData != null) {
                    arraydata.features = $.merge(arraydata.features,itemsData);
                }

                itemsData = data.features.filter(x => x.properties.layersource == "urbanareas");
                if (itemsData != null) {
                    arraydata.features = $.merge(arraydata.features,itemsData);
                }

                itemsData = data.features.filter(x => x.properties.layersource == "urbanareascontour");
                if (itemsData != null) {
                    arrayUrbanLayer.features = $.merge(arrayUrbanLayer.features,itemsData);
                    selection_Contour.setSource(setSelectionSource(arrayUrbanLayer));
                }

                itemsData = data.features.filter(x => x.properties.layersource == "geometry");
                if (itemsData != null) {
                    arrayGeometry.features = $.merge(arrayGeometry.features, itemsData);
                    geometry_Buffer.setSource(setSelectionSource(arrayGeometry));
                }
                arraydata.features.forEach((element) => {
                    element.properties["namefile"] = fileName;
                })
                arraydataMap = arraydata;
                BuildPage();
  
                exportData();
                ///refreshElements();
                
            });
        }
        function BuildPage() {
            interactionType="";
            layerType = "All";
            
            $("#inputCommand").on('change', function() {
                interactionType = $(this).val();
                manageInteraction();
            });
            $("#inputDataType").on('change', function() {
                impactTCselected = DecodeDataTypeSelection($(this).val());
            });
            
            $("#inputLayer").on('change', function () {
                layerType = $(this).val();
                refreshElements();
                /*
                showData($(this).val(), layerIntensity);
                changeGeometry("10000");
                assignPopulation("10000");
                createGridTable("10000");
                $('#inputScale').change();
                $('.cbrow').change(function() {
                    changeVisibility($(this).data('index'));				
                });
                */
            });
            $(".button_interaction").click(function () {
                interactionType = $(this).data("value");
                manageInteraction();
            });
            /*
            $('#inputScale').on('change', function() {
                $('#ctl00_CPH_hiddenscale').val(this.value );
                changeGeometry(this.value);
                assignPopulation(this.value);
                createGridTable(this.value);
            });*/

            //Populate inputIntesity dropdownlist
            if (eventtype == "EQ") {
                $("#labelSource").html("<h4>Sources</h4>");
                $("#submenuCyclone").remove();
                $("#inputIntensity").empty();
                $("#inputIntensity").append($("<option />").val("All").text("All").prop("selected",true));
                for (var i = 10; i >= 6; i--) {
                    if (arraydataMap.features.filter(x => x.properties["intensity"] == i).length > 0) {
                        $("#inputIntensity").append($("<option />").val(i).text(i));
                    }

                }
                $("#labelIntensity").html("<h4>Intensity</H4>");
                $('#rowLegend').remove();
            }
            else {
                $("#labelIntensity").html("<h4>Hazard</H4>");
                $("#labelSource").html("<h4>Atmospheric sources</h4>");
                $("#inputIntensity").empty();
                //$("#inputIntensity").append($("<option />").val("All").text("All").prop("selected", true));
                $("#inputIntensity").append($("<option />").val("All").text("All"));
                var propSelected = false;
                for (var i = 5; i >= 1; i--) {
                    if (arraydataMap.features.filter(x => x.properties["intensity"] == i).length > 0) {
                        if ( impactTCselected.toLowerCase().indexOf("rain")!=-1 ) {
                            $("#inputIntensity").append($("<option />").val(i).text("RAIN. " + i));
                        }
                        else if ( impactTCselected.toLowerCase().indexOf("surge")!=-1) {
                            $("#inputIntensity").append($("<option />").val(i).text("SS. " + i));
                        }else if ( impactTCselected.toLowerCase().indexOf("comb")!=-1 || impactTCselected.toLowerCase().indexOf("maximumall")!=-1) {
                            $("#inputIntensity").append($("<option />").val(i).text("LEVEL. " + i));
                        }
                        else {
                            $("#inputIntensity").append($("<option />").val(i).text(DecodeWindIntensity(i)));
                        }
                        if (!propSelected) {
                            propSelected = true;
                            $("#inputIntensity option").last().prop("selected", true);
                        }
                    }
                    
                }

                $("#submenu" + impactTCselected).removeClass("sources_minitabs_aoi");
                $("#submenu" + impactTCselected).addClass("sources_minitabs_aoi_sel");
                
                
                //$('#imageLegend').html('<img id="img1" width="55%"  src="Images/legend_aoi_tc_' + impactTCselected + '_h.png" />');
                $('#imageLegend').html('<span style="font-size:15px;font-style:normal;color:#125172;height:25px;vertical-align:middle">Legend (Hazard):    </span><img id="img1" width="55%"  src="Images/legend_aoi_tc_' + impactTCselected + '_h.png" />');
                

            }
            $('#inputIntensity').on('change', function () {
                layerIntensity = $(this).val();
                refreshElements();
                /*
                showData(layerType, $(this).val());
                changeGeometry("");
                assignPopulation("10000");
                createGridTable("");
                $('#inputScale').change();
                changeVisibility("");
                $('.cbrow').change(function() {
                    changeVisibility($(this).data('index'));				
                });
                */
            });

            $("#inputIntensity").val($("#inputIntensity option:selected").val());//All
            //$("#inputScale").val($("#inputScale option:first").val());//10000
            $("#inputCommand").val($("#inputCommand option:first").val());//None
            $("#inputLayer").val($("#inputLayer option:eq(0)").val());//All
            layerIntensity=$("#inputIntensity option:selected").val();
            refreshElements();
        }
        //function CreateLegendTable() {
        //    var _table = "";
        //    var _intensity = [];

        //    $.each(arraydataMap.features, function (key, val) {
        //        if (_intensity.indexOf(val.properties["intensity"]) == -1) {
        //            _intensity.push(val.properties["intensity"]);
        //        }
        //    });
        //    //Sort in ascending
        //    _intensity.sort(function (a, b) { return a - b; });

        //    return _table;
        //}


        $(function () {
            $('#TitleSubDescription').slideUp();
            $('#expand_desc').on('click',function(){
                if ($('#TitleSubDescription').is(":visible")) {
                    $('#TitleSubDescription').slideUp();
					$('#icon_expand_desc').removeClass("fa-angle-double-up");
					$('#icon_expand_desc').addClass("fa-angle-double-down");
                }
                else {
                    $('#TitleSubDescription').slideDown();
					$('#icon_expand_desc').removeClass("fa-angle-double-down");
					$('#icon_expand_desc').addClass("fa-angle-double-up");
                }
            });        
            if (!showVersion) {
                $("#mapcommandversion").hide();
            }
            populateCommandSelector();
            manageEnabledSources($("#inputVersion").find(":selected").val());
            manageEnabledDataType($("#inputSource").find(":selected").val())
            ApplyFilter();
            //BuildPage();
            
        });

        function refreshElements() {
            showData(layerType, layerIntensity);
            changeVisibility("");
            manageInteraction();
            assignPopulation("10000");
            createGridTable("");
            $('#inputScale').change();
            $('.cbrow').change(function() {
                changeVisibility($(this).data('index'));				
            });
            $("#cbAll").change(function () {
                $('input:checkbox').not(this).prop('checked', this.checked);
                for (var i = 0; i < arraydataMap.features.length; i++) {
                    arraydataMap.features[i].properties.itemchecked = this.checked;
                }
                let _arrayMap = $.extend(true, {}, arraydataMap);
                _arrayMap.features = _arrayMap.features.filter(function (item) { return item.properties.itemchecked == true && item.properties.visible == true; });
                selection_Buffer.setSource(setSelectionSource(_arrayMap));
            });


        }


    </script>  
    <script type="text/javascript" src="Scripts/GdacsMap/reportmapAOI.js"></script>

                

<script type="text/javascript">
//<![CDATA[
(function() {var fn = function() {$get("ctl00_CPH_ToolkitScriptManager1_HiddenField").value = '';Sys.Application.remove_init(fn);};Sys.Application.add_init(fn);})();//]]>
</script>
</form>
            </div><!-- end main_alert_content-->
            

            <div id="footer_home">
                <nav class="navbar navbar-expand-lg navbar-light navbar-footer col-12">
                  <button class="navbar-toggler" style="font-size:18px; color:white; font-weight:bold" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon" style="color:white;"></span>
                      MENU
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNavAltMarkupFooter">
                    <div class="navbar-nav">
                        <a class="nav-item nav-link" href="default.aspx.html">HOME</a>
                        <a class="nav-item nav-link" href="Alerts/default.aspx.html">ALERTS</a>
                        <a class="nav-item nav-link" href="http://vosocc.unocha.org">VIRTUAL OSOCC</a>
                        <a class="nav-item nav-link" href="https://smcs.unosat.org/home" target="_blank">MAPS & SATELLITE IMAGERY</a>
                        <a class="nav-item nav-link" href="Knowledge/overview.aspx.html">KNOWLEDGE</a>
                        <a class="nav-item nav-link" href="About/overview.aspx.html">ABOUT GDACS</a>
                    </div>
                  </div>
                </nav>
                <div id="footer_disclaimer" class="col-12">
                    <!--<div class="float-left gdacs_bottom_menu_content" ><a href="https://ec.europa.eu/info/brexit-content-disclaimer" target="_blank">Brexit content disclaimer</a></div>-->
                    <div class="float-end gdacs_bottom_menu_content"><a href="About/cookies.aspx.html" target="_blank">cookies</a></div>
                    <p><b><span class="gdacs_bottom_menu_content"><a href="https://ec.europa.eu/info/legal-notice_en" target="_blank">Disclaimer</a></span></b><br>
                    While we try everything to ensure accuracy, this information is purely indicative and should not be used for any decision making without alternate sources of information. 
                    <br>The JRC is not responsible for any damage or loss resulting from the use of the information presented on this website.
                    <br>The designations employed and the presentation of material on the map do not imply the expression of any opinion whatsoever on the part of the European Union concerning the legal status of any country, territory or area or of its authorities, or concerning the delimitation of its frontiers or boundaries.
                    </p>
                </div>
                <div id="footer_logo" class="d-none d-lg-block col-lg-12">
                    <div class="footerlogo_item d-none d-lg-block"><img src="images/gdacs_icons/partners/ec.png" width="90" height="70" alt=""></div>
                    <div class="footerlogo_item d-none d-lg-block"><img src="images/gdacs_icons/partners/ocha.png" width="90" height="70" alt=""></div>
                    <div class="footerlogo_item d-none d-lg-block"><img src="images/gdacs_icons/partners/unitar.png" width="90" height="70" alt=""></div>
                    <div class="footerlogo_item d-none d-lg-block"><img src="images/gdacs_icons/partners/unosat.png" width="90" height="70" alt=""></div>
                </div>
	        </div>
                                
        </div>
    </div>

<script type="text/javascript">

    $(function () {
        if (window.innerWidth < 991) {
            $("#nopadding").addClass('container-fluid').removeClass('container');
            $("#meteorological").remove();
            $("#secondary_cyclone_source").remove();
            $("#tab_responsive").addClass('table-responsive');
            $("#cities").addClass('table-responsive');
            $("#airports").addClass('table-responsive');
            $("#dams").addClass('table-responsive');
            if (document.getElementById("mapcol1") != null) { (document.getElementById("mapcol1").style.paddingLeft = '0px') };
            if (document.getElementById("sectionImageSS1") != null) { (document.getElementById("sectionImageSS1").style.paddingLeft = '0px') };
            if (document.getElementById("sectionImageSS2") != null) { (document.getElementById("sectionImageSS2").style.paddingLeft = '0px') };
            if (document.getElementById("#alert_sources_minitabs") != null) { (document.getElementById("#alert_sources_minitabs").style.paddingLeft = '0px') };
            if (document.getElementById("#eventMenu") != null) { (document.getElementById("#eventMenu").style.paddingLeft = '0px') };
            if (document.getElementById("#eventMenuDrop") != null) { (document.getElementById("#eventMenuDrop").style.paddingLeft = '0px') };
        }

    });

    $(window).resize(function () {
        if (window.innerWidth < 991) {
            $("#nopadding").addClass('container-fluid').removeClass('container');
            $("#tab_responsive").addClass('table-responsive');
            $("#cities").addClass('table-responsive');
            $("#airports").addClass('table-responsive');
            $("#dams").addClass('table-responsive');
            if (document.getElementById("mapcol1") != null) { (document.getElementById("mapcol1").style.paddingLeft = '0px') };
            if (document.getElementById("sectionImageSS1") != null) { (document.getElementById("sectionImageSS1").style.paddingLeft = '0px') };
            if (document.getElementById("sectionImageSS2") != null) { (document.getElementById("sectionImageSS2").style.paddingLeft = '0px') };
            if (document.getElementById("#eventMenu") != null) { (document.getElementById("#eventMenu").style.paddingLeft = '0px') };
            if (document.getElementById("#eventMenuDrop") != null) { (document.getElementById("#eventMenuDrop").style.paddingLeft = '0px') };
        }
        else {
            $("#nopadding").addClass('container').removeClass('container-fluid');
            $("#tab_responsive").removeClass('table table-responsive');
            $("#cities").removeClass('table-responsive');
            if (document.getElementById("mapcol1") != null) { (document.getElementById("mapcol1").style.paddingLeft = '15px') };
            if (document.getElementById("sectionImageSS1") != null) { (document.getElementById("sectionImageSS1").style.paddingLeft = '15px') };
            if (document.getElementById("sectionImageSS2") != null) { (document.getElementById("sectionImageSS2").style.paddingLeft = '15px') };
            if (document.getElementById("#alert_sources_minitabs") != null) { (document.getElementById("#alert_sources_minitabs").style.paddingLeft = '0px') };
            if (document.getElementById("#section") != null) { (document.getElementById("#section").style.paddingLeft = '15px') };
            if (document.getElementById("#eventMenu") != null) { (document.getElementById("#eventMenu").style.paddingLeft = '15px') };
            if (document.getElementById("#eventMenuDrop") != null) { (document.getElementById("#eventMenuDrop").style.paddingLeft = '0px') };
        }

        if (window.innerWidth < 768) {
            $("#legend").remove();
            $("#meteorological").remove();
            $("#alert_sources_minitabs").after("<div id=\"meteorological\" class=\"col-lg-12\" style=\"padding-left: 0px;\"><div class=\"sources_\"> <p class=\"p_summary\" style=\"padding-left: 0px;\"><p class=\"col-lg-4\" style=\"color: #6d9baf;text-decoration: none;font-weight: bold;\">Meteorological source</p>:</p><br/><br/></div>" +
                "<br/><div class=\"main_cyclone_source\"><div class=\"sources_minitabs_sel\">GDACS</div><div class=\"p_summary_extrasmall\" style=\"margin-left:10px\">Impact Single TC</div>" +
                "</div><br/><br/><div class=\"secondary_cyclone_source\"><div class=\"sources_minitabs_not_active\">HWRF</div><div class=\"sources_minitabs_not_active\">ECMWF</div>" +
                "<div class=\"sources_minitabs_not_active\">GFS</div><div class=\"p_summary_extrasmall\" style=\"margin - left: 10px\">Impact all weather systems in the area</div></div></div>");
            if (document.getElementById("#alert_sources_minitabs") != null) { (document.getElementById("#alert_sources_minitabs").style.paddingLeft = '0px') };
            if (document.getElementById("#section") != null) { (document.getElementById("#section").style.paddingLeft = '0px') };
        }
        else {
            $("#meteorological").remove();
            $("#section1").before("<div id=\"meteorological\" class=\"col-lg-12\" style=\"padding-left: 15px;\"><div class=\"sources_\"> <p class=\"p_summary\"><a href=\"*\">Meteorological source</a>:</p></div>" +
                "<div class=\"main_cyclone_source\"><div class=\"sources_minitabs_sel\">GDACS</div><div class=\"p_summary_extrasmall\" style=\"margin-left:10px\">Impact Single TC</div>" +
                "</div><div class=\"secondary_cyclone_source\"><div class=\"sources_minitabs_not_active\">HWRF</div><div class=\"sources_minitabs_not_active\">ECMWF</div>" +
                "<div class=\"sources_minitabs_not_active\">GFS</div><div class=\"p_summary_extrasmall\" style=\"margin - left: 10px\">Impact all weather systems in the area</div></div></div>");
        }


        if (window.innerWidth < 500) {
            $("#slider_rain_container").attr("style", "width: 400px;");
        }
        else {
            $("#slider_rain_container").attr("style", "width: 500px;");
        }


        if (window.innerWidth < 400) {
            $("#slider_rain_container").attr("style", "width: 320px");
            $("#labelRainDate").attr("style", "width: 320px;float: left;text-align: center;font-weight: bold;");
        }
        else {
            $("#slider_rain_container").attr("style", "width: 500px;");
            $("#labelRainDate").attr("style", "width: 440px;float: left;text-align: center;font-weight: bold;");
        }


        if (window.innerWidth < 500) {
            $("#slider_rain_container").attr("style", "width: 400px;");
        }

        if (window.innerWidth < 400) {
            $("#slider_rain_container").attr("style", "width: 320px");
            $("#labelRainDate").attr("style", "width: 320px;float: left;text-align: center;font-weight: bold;");

        }


    });

</script>

<!--
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-298127-1");
pageTracker._setDomainName(".gdacs.org");
pageTracker._setLocalRemoteServerMode();
pageTracker._trackPageview();
} catch(err) {}</script>
-->
</body>
</html>
